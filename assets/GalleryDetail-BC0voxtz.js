import{r as d,j as e,C as S,u as T,s as M,A as L,P as F,T as G,L as y,b as w,d as P,D as R,e as A}from"./three-vendor-D2i6uCpp.js";import{u as v,t as k}from"./index-DXoXiou-.js";/* empty css                     */import{i as D}from"./galleryData-DhFaeorm.js";/* empty css                      */import{c as z,b as Y}from"./router-CpB91di7.js";function b(){const s=document.createElement("canvas");s.width=512,s.height=512;const a=s.getContext("2d");a.fillStyle="#f0f0f0",a.fillRect(0,0,512,512),a.fillStyle="#999",a.font="24px Arial",a.textAlign="center",a.fillText("Image not found",256,256);const o=new A(s);return o.minFilter=y,o.magFilter=y,o.wrapS=w,o.wrapT=w,o.generateMipmaps=!1,o.flipY=!0,o}function U({image:s,texture:a,isActive:o,onClick:n}){const t=d.useRef(),r=d.useRef();return d.useEffect(()=>{a&&(a.minFilter=y,a.magFilter=y,a.wrapS=w,a.wrapT=w,a.generateMipmaps=!1,a.flipY=!0,a.needsUpdate=!0)},[a]),d.useEffect(()=>{r.current&&a&&(r.current.map=a,r.current.needsUpdate=!0)},[a]),P(l=>{t.current&&o&&(t.current.rotation.y=Math.sin(l.clock.elapsedTime*.5)*.05,t.current.position.y=Math.sin(l.clock.elapsedTime*.8)*.1)}),o?e.jsxs("group",{ref:t,position:[0,0,0],children:[e.jsxs("mesh",{position:[0,0,-.02],children:[e.jsx("planeGeometry",{args:[4.2,5.2]}),e.jsx("meshStandardMaterial",{color:"#6b5d4d",metalness:.1,roughness:.7})]}),e.jsxs("mesh",{position:[0,0,-.01],children:[e.jsx("planeGeometry",{args:[4,5]}),e.jsx("meshStandardMaterial",{color:"#ffffff"})]}),e.jsxs("mesh",{position:[0,0,0],onClick:n,onPointerOver:l=>{l.stopPropagation(),document.body.style.cursor="pointer"},onPointerOut:()=>{document.body.style.cursor="default"},children:[e.jsx("planeGeometry",{args:[3.5,4.5]}),e.jsx("meshStandardMaterial",{ref:r,map:a,side:R,toneMapped:!0})]})]}):null}function $({image:s,isActive:a,onClick:o}){const[n,t]=d.useState(null);return d.useEffect(()=>{if(!a||!s||!s.src)return;let r=null,l=null;const g=(p=!0)=>{l=new Image,p&&(l.crossOrigin="anonymous"),l.onload=()=>{try{const i=new G(l);i.minFilter=y,i.magFilter=y,i.wrapS=w,i.wrapT=w,i.generateMipmaps=!1,i.flipY=!0,i.needsUpdate=!0,r=i,t(i)}catch(i){if(console.warn(`Failed to create texture from image: ${s.src}`,i),p)g(!1);else{const u=b();u.flipY=!0,r=u,t(u)}}},l.onerror=i=>{if(console.warn(`Failed to load image: ${s.src}`,i),p)g(!1);else{const u=b();u.flipY=!0,r=u,t(u)}},l.src=s.src};return g(!0),()=>{r&&r.dispose&&r.dispose(),l&&(l.onload=null,l.onerror=null,l.src="")}},[s==null?void 0:s.src,a]),n?e.jsx(U,{image:s,texture:n,isActive:a,onClick:o}):null}function B({image:s,isActive:a,onImageClick:o}){const{gl:n}=T();return d.useEffect(()=>{n.setPixelRatio(Math.min(window.devicePixelRatio,2)),n.antialias=!0,n.outputEncoding=M,n.toneMapping=L,n.toneMappingExposure=1.2},[n]),e.jsxs(e.Fragment,{children:[e.jsx(F,{makeDefault:!0,position:[0,0,6],fov:50}),e.jsx("ambientLight",{intensity:1.2}),e.jsx("directionalLight",{position:[5,5,5],intensity:1.8}),e.jsx("directionalLight",{position:[-5,5,-5],intensity:1}),e.jsx("directionalLight",{position:[0,5,0],intensity:.8}),e.jsx("directionalLight",{position:[0,-5,0],intensity:.5}),e.jsxs("mesh",{position:[0,0,-3],children:[e.jsx("planeGeometry",{args:[20,20]}),e.jsx("meshStandardMaterial",{color:"#e8e8e8"})]}),s&&e.jsx($,{image:s,isActive:a,onClick:o})]})}function O({image:s,onClose:a,onNext:o,onPrevious:n,hasNext:t,hasPrevious:r,showDescription:l=!1}){const{language:g}=v(),p=k[g];return d.useEffect(()=>{const i=u=>{u.key==="Escape"?a():u.key==="ArrowRight"&&t?o():u.key==="ArrowLeft"&&r&&n()};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[a,o,n,t,r]),e.jsx("div",{className:"image-detail-overlay",onClick:a,children:e.jsxs("div",{className:`image-detail-wrapper ${l?"with-description":"centered-only"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{className:"image-detail-close",onClick:a,children:"×"}),r&&e.jsx("button",{className:"image-detail-nav image-detail-prev",onClick:n,children:"‹"}),t&&e.jsx("button",{className:"image-detail-nav image-detail-next",onClick:o,children:"›"}),l?e.jsxs("div",{className:"image-detail-content",children:[e.jsx("div",{className:"image-detail-column image-detail-image-column",children:e.jsx("img",{src:s.src,alt:s.alt||s.title,className:"image-detail-img"})}),e.jsx("div",{className:"image-detail-column image-detail-info-column",children:e.jsxs("div",{className:"image-detail-info-box",children:[s.title&&e.jsx("h3",{className:"image-detail-title",children:s.title}),s.artist&&e.jsxs("p",{className:"image-detail-artist",children:[p.artworks.by," ",s.artist]}),s.medium&&e.jsx("p",{className:"image-detail-medium",children:s.medium}),s.description&&e.jsx("div",{className:"image-detail-description",children:e.jsx("p",{children:s.description})})]})})]}):e.jsx("div",{className:"image-detail-content-centered",children:e.jsx("img",{src:s.src,alt:s.alt||s.title,className:"image-detail-img"})})]})})}function K({gallery:s,onClose:a}){var N;const{language:o}=v(),n=k[o],[t,r]=d.useState(0),[l,g]=d.useState(!1),[p,i]=d.useState(null),u=d.useRef(null),m=((N=s==null?void 0:s.images)==null?void 0:N.filter(h=>h&&h.src))||[],c=m[t]||null;d.useEffect(()=>{s&&s.images&&(console.log("Gallery images:",s.images.length),c&&console.log("Current image:",c.src))},[s,c]),d.useEffect(()=>{const h=j=>{j.key==="Escape"?a():j.key==="ArrowRight"||j.key==="ArrowDown"?(j.preventDefault(),f()):(j.key==="ArrowLeft"||j.key==="ArrowUp")&&(j.preventDefault(),x())};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[t,m.length,a]);const f=()=>{l||m.length===0||(g(!0),setTimeout(()=>{r(h=>(h+1)%m.length),g(!1)},200))},x=()=>{l||m.length===0||(g(!0),setTimeout(()=>{r(h=>(h-1+m.length)%m.length),g(!1)},200))},E=()=>{c&&i(c)},C=()=>{if(t<m.length-1){const h=t+1;r(h),i(m[h])}},I=()=>{if(t>0){const h=t-1;r(h),i(m[h])}};return d.useEffect(()=>{m.length>0&&t===0&&r(0)},[m.length]),!s||m.length===0?null:e.jsxs("div",{className:"gallery-modal-overlay",onClick:a,children:[e.jsxs("div",{className:"gallery-modal-content",onClick:h=>h.stopPropagation(),children:[e.jsx("button",{className:"gallery-modal-close",onClick:a,children:"×"}),e.jsxs("div",{className:"gallery-modal-header",children:[e.jsx("h2",{className:"gallery-modal-title",children:s.name}),e.jsxs("p",{className:"gallery-modal-subtitle",children:[t+1," ",n.gallery.of," ",m.length]}),c&&e.jsxs("div",{className:"gallery-modal-artwork-info",children:[c.title&&e.jsx("h3",{className:"gallery-modal-artwork-title",children:c.title}),c.artist&&e.jsxs("p",{className:"gallery-modal-artwork-artist",children:[n.artworks.by," ",c.artist]}),c.medium&&e.jsx("p",{className:"gallery-modal-artwork-medium",children:c.medium})]})]}),e.jsx("div",{className:"gallery-modal-canvas-container",ref:u,children:e.jsx(S,{gl:{antialias:!0,alpha:!1,powerPreference:"high-performance",stencil:!1,depth:!0},dpr:[1,2],children:e.jsx(d.Suspense,{fallback:null,children:e.jsx(B,{image:c,isActive:!l,onImageClick:E})})})}),e.jsxs("div",{className:"gallery-modal-controls",children:[e.jsx("div",{className:"gallery-control-instructions",children:e.jsx("p",{children:n.gallery.useArrows})}),e.jsxs("div",{className:"gallery-control-buttons",children:[e.jsx("button",{className:"control-btn control-btn-left",onClick:x,disabled:l,"aria-label":"Previous image",children:"←"}),e.jsx("button",{className:"control-btn control-btn-right",onClick:f,disabled:l,"aria-label":"Next image",children:"→"})]})]})]}),p&&e.jsx(O,{image:p,onClose:()=>i(null),onNext:C,onPrevious:I,hasNext:t<m.length-1,hasPrevious:t>0,showDescription:!1})]})}function Q(){const{galleryId:s}=z(),a=Y(),{language:o}=v(),n=k[o],[t,r]=d.useState(null),[l,g]=d.useState(null),[p,i]=d.useState(!1);d.useEffect(()=>{const f=D().find(x=>x.id===s);r(f)},[s]);const u=(c,f)=>{if(!t)return;const x={...t,images:[...t.images.slice(f),...t.images.slice(0,f)]};g(x),i(!0)},m=()=>{i(!1),g(null)};return t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"page-container gallery-detail-container",children:e.jsxs("div",{className:"page-content gallery-detail-content-wrapper",children:[e.jsx("button",{className:"back-button",onClick:()=>a("/"),children:n.gallery.backToArchive}),e.jsx("h1",{className:"gallery-detail-title",children:t.name}),t.description&&e.jsx("div",{className:"gallery-description",children:e.jsx("p",{children:t.description})}),t.instagramLinks&&t.instagramLinks.length>0&&e.jsxs("div",{className:"gallery-instagram-links",children:[e.jsx("h3",{children:n.gallery.followArtists}),e.jsx("div",{className:"instagram-links-list",children:t.instagramLinks.map((c,f)=>e.jsxs("a",{href:c.url,target:"_blank",rel:"noopener noreferrer",className:"instagram-link",children:[e.jsx("span",{className:"instagram-icon",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),c.name]},f))})]}),e.jsxs("div",{className:"gallery-thumbnails-section",children:[e.jsxs("h2",{className:"thumbnails-heading",children:[t.images.length," ",t.images.length===1?n.gallery.work:n.gallery.works]}),e.jsx("div",{className:"gallery-thumbnails-grid",children:t.images.map((c,f)=>e.jsx("div",{className:"gallery-thumbnail-item",onClick:()=>u(c,f),children:e.jsxs("div",{className:"thumbnail-image-wrapper",children:[e.jsx("img",{src:c.src,alt:c.alt||`Image ${f+1}`,onError:x=>{x.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="300"%3E%3Crect width="400" height="300" fill="%23f0f0f0"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%23999"%3EImage%3C/text%3E%3C/svg%3E'}}),e.jsx("div",{className:"thumbnail-overlay",children:e.jsxs("svg",{className:"eye-icon",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})},c.id||f))})]})]})}),p&&l&&e.jsx(K,{gallery:l,onClose:m})]}):e.jsx("div",{className:"page-container",children:e.jsxs("div",{className:"page-content",children:[e.jsx("p",{children:n.common.notFound}),e.jsx("button",{onClick:()=>a("/"),children:n.common.returnHome})]})})}export{Q as default};
