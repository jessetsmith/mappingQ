import{r as d,j as e,C as b,u as E,s as C,A as I,P as S,T as M,L as x,b as j,d as T,D as L,e as F}from"./three-vendor-D2i6uCpp.js";/* empty css                     */import{i as G}from"./galleryData-CJxCViJe.js";/* empty css                      */import{c as R,b as P}from"./router-CpB91di7.js";import"./index-DKWZiAe1.js";function v(){const s=document.createElement("canvas");s.width=512,s.height=512;const a=s.getContext("2d");a.fillStyle="#f0f0f0",a.fillRect(0,0,512,512),a.fillStyle="#999",a.font="24px Arial",a.textAlign="center",a.fillText("Image not found",256,256);const t=new F(s);return t.minFilter=x,t.magFilter=x,t.wrapS=j,t.wrapT=j,t.generateMipmaps=!1,t.flipY=!0,t}function A({image:s,texture:a,isActive:t,onClick:i}){const o=d.useRef(),r=d.useRef();return d.useEffect(()=>{a&&(a.minFilter=x,a.magFilter=x,a.wrapS=j,a.wrapT=j,a.generateMipmaps=!1,a.flipY=!0,a.needsUpdate=!0)},[a]),d.useEffect(()=>{r.current&&a&&(r.current.map=a,r.current.needsUpdate=!0)},[a]),T(c=>{o.current&&t&&(o.current.rotation.y=Math.sin(c.clock.elapsedTime*.5)*.05,o.current.position.y=Math.sin(c.clock.elapsedTime*.8)*.1)}),t?e.jsxs("group",{ref:o,position:[0,0,0],children:[e.jsxs("mesh",{position:[0,0,-.02],children:[e.jsx("planeGeometry",{args:[4.2,5.2]}),e.jsx("meshStandardMaterial",{color:"#6b5d4d",metalness:.1,roughness:.7})]}),e.jsxs("mesh",{position:[0,0,-.01],children:[e.jsx("planeGeometry",{args:[4,5]}),e.jsx("meshStandardMaterial",{color:"#ffffff"})]}),e.jsxs("mesh",{position:[0,0,0],onClick:i,onPointerOver:c=>{c.stopPropagation(),document.body.style.cursor="pointer"},onPointerOut:()=>{document.body.style.cursor="default"},children:[e.jsx("planeGeometry",{args:[3.5,4.5]}),e.jsx("meshStandardMaterial",{ref:r,map:a,side:L,toneMapped:!0})]})]}):null}function D({image:s,isActive:a,onClick:t}){const[i,o]=d.useState(null);return d.useEffect(()=>{if(!a||!s||!s.src)return;let r=null,c=null;const h=(g=!0)=>{c=new Image,g&&(c.crossOrigin="anonymous"),c.onload=()=>{try{const l=new M(c);l.minFilter=x,l.magFilter=x,l.wrapS=j,l.wrapT=j,l.generateMipmaps=!1,l.flipY=!0,l.needsUpdate=!0,r=l,o(l)}catch(l){if(console.warn(`Failed to create texture from image: ${s.src}`,l),g)h(!1);else{const n=v();n.flipY=!0,r=n,o(n)}}},c.onerror=l=>{if(console.warn(`Failed to load image: ${s.src}`,l),g)h(!1);else{const n=v();n.flipY=!0,r=n,o(n)}},c.src=s.src};return h(!0),()=>{r&&r.dispose&&r.dispose(),c&&(c.onload=null,c.onerror=null,c.src="")}},[s==null?void 0:s.src,a]),i?e.jsx(A,{image:s,texture:i,isActive:a,onClick:t}):null}function z({image:s,isActive:a,onImageClick:t}){const{gl:i}=E();return d.useEffect(()=>{i.setPixelRatio(Math.min(window.devicePixelRatio,2)),i.antialias=!0,i.outputEncoding=C,i.toneMapping=I,i.toneMappingExposure=1.2},[i]),e.jsxs(e.Fragment,{children:[e.jsx(S,{makeDefault:!0,position:[0,0,6],fov:50}),e.jsx("ambientLight",{intensity:1.2}),e.jsx("directionalLight",{position:[5,5,5],intensity:1.8}),e.jsx("directionalLight",{position:[-5,5,-5],intensity:1}),e.jsx("directionalLight",{position:[0,5,0],intensity:.8}),e.jsx("directionalLight",{position:[0,-5,0],intensity:.5}),e.jsxs("mesh",{position:[0,0,-3],children:[e.jsx("planeGeometry",{args:[20,20]}),e.jsx("meshStandardMaterial",{color:"#e8e8e8"})]}),s&&e.jsx(D,{image:s,isActive:a,onClick:t})]})}function U({image:s,onClose:a,onNext:t,onPrevious:i,hasNext:o,hasPrevious:r,showDescription:c=!1}){return d.useEffect(()=>{const h=g=>{g.key==="Escape"?a():g.key==="ArrowRight"&&o?t():g.key==="ArrowLeft"&&r&&i()};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[a,t,i,o,r]),e.jsx("div",{className:"image-detail-overlay",onClick:a,children:e.jsxs("div",{className:`image-detail-wrapper ${c?"with-description":"centered-only"}`,onClick:h=>h.stopPropagation(),children:[e.jsx("button",{className:"image-detail-close",onClick:a,children:"×"}),r&&e.jsx("button",{className:"image-detail-nav image-detail-prev",onClick:i,children:"‹"}),o&&e.jsx("button",{className:"image-detail-nav image-detail-next",onClick:t,children:"›"}),c?e.jsxs("div",{className:"image-detail-content",children:[e.jsx("div",{className:"image-detail-column image-detail-image-column",children:e.jsx("img",{src:s.src,alt:s.alt||s.title,className:"image-detail-img"})}),e.jsx("div",{className:"image-detail-column image-detail-info-column",children:e.jsxs("div",{className:"image-detail-info-box",children:[s.title&&e.jsx("h3",{className:"image-detail-title",children:s.title}),s.artist&&e.jsxs("p",{className:"image-detail-artist",children:["by ",s.artist]}),s.medium&&e.jsx("p",{className:"image-detail-medium",children:s.medium}),s.description&&e.jsx("div",{className:"image-detail-description",children:e.jsx("p",{children:s.description})})]})})]}):e.jsx("div",{className:"image-detail-content-centered",children:e.jsx("img",{src:s.src,alt:s.alt||s.title,className:"image-detail-img"})})]})})}function Y({gallery:s,onClose:a}){var y;const[t,i]=d.useState(0),[o,r]=d.useState(!1),[c,h]=d.useState(null),g=d.useRef(null),l=((y=s==null?void 0:s.images)==null?void 0:y.filter(m=>m&&m.src))||[],n=l[t]||null;d.useEffect(()=>{s&&s.images&&(console.log("Gallery images:",s.images.length),n&&console.log("Current image:",n.src))},[s,n]),d.useEffect(()=>{const m=p=>{p.key==="Escape"?a():p.key==="ArrowRight"||p.key==="ArrowDown"?(p.preventDefault(),u()):(p.key==="ArrowLeft"||p.key==="ArrowUp")&&(p.preventDefault(),f())};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[t,l.length,a]);const u=()=>{o||l.length===0||(r(!0),setTimeout(()=>{i(m=>(m+1)%l.length),r(!1)},200))},f=()=>{o||l.length===0||(r(!0),setTimeout(()=>{i(m=>(m-1+l.length)%l.length),r(!1)},200))},w=()=>{n&&h(n)},k=()=>{if(t<l.length-1){const m=t+1;i(m),h(l[m])}},N=()=>{if(t>0){const m=t-1;i(m),h(l[m])}};return d.useEffect(()=>{l.length>0&&t===0&&i(0)},[l.length]),!s||l.length===0?null:e.jsxs("div",{className:"gallery-modal-overlay",onClick:a,children:[e.jsxs("div",{className:"gallery-modal-content",onClick:m=>m.stopPropagation(),children:[e.jsx("button",{className:"gallery-modal-close",onClick:a,children:"×"}),e.jsxs("div",{className:"gallery-modal-header",children:[e.jsx("h2",{className:"gallery-modal-title",children:s.name}),e.jsxs("p",{className:"gallery-modal-subtitle",children:[t+1," of ",l.length]}),n&&e.jsxs("div",{className:"gallery-modal-artwork-info",children:[n.title&&e.jsx("h3",{className:"gallery-modal-artwork-title",children:n.title}),n.artist&&e.jsxs("p",{className:"gallery-modal-artwork-artist",children:["by ",n.artist]}),n.medium&&e.jsx("p",{className:"gallery-modal-artwork-medium",children:n.medium})]})]}),e.jsx("div",{className:"gallery-modal-canvas-container",ref:g,children:e.jsx(b,{gl:{antialias:!0,alpha:!1,powerPreference:"high-performance",stencil:!1,depth:!0},dpr:[1,2],children:e.jsx(d.Suspense,{fallback:null,children:e.jsx(z,{image:n,isActive:!o,onImageClick:w})})})}),e.jsxs("div",{className:"gallery-modal-controls",children:[e.jsx("div",{className:"gallery-control-instructions",children:e.jsx("p",{children:"Use arrow buttons or keyboard arrows to navigate"})}),e.jsxs("div",{className:"gallery-control-buttons",children:[e.jsx("button",{className:"control-btn control-btn-left",onClick:f,disabled:o,"aria-label":"Previous image",children:"←"}),e.jsx("button",{className:"control-btn control-btn-right",onClick:u,disabled:o,"aria-label":"Next image",children:"→"})]})]})]}),c&&e.jsx(U,{image:c,onClose:()=>h(null),onNext:k,onPrevious:N,hasNext:t<l.length-1,hasPrevious:t>0,showDescription:!1})]})}function V(){const{galleryId:s}=R(),a=P(),[t,i]=d.useState(null),[o,r]=d.useState(null),[c,h]=d.useState(!1);d.useEffect(()=>{const u=G().find(f=>f.id===s);i(u)},[s]);const g=(n,u)=>{if(!t)return;const f={...t,images:[...t.images.slice(u),...t.images.slice(0,u)]};r(f),h(!0)},l=()=>{h(!1),r(null)};return t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"page-container gallery-detail-container",children:e.jsxs("div",{className:"page-content",children:[e.jsx("button",{className:"back-button",onClick:()=>a("/"),children:"← Back to Archive"}),e.jsx("h1",{className:"gallery-detail-title",children:t.name}),t.description&&e.jsx("div",{className:"gallery-description",children:e.jsx("p",{children:t.description})}),t.instagramLinks&&t.instagramLinks.length>0&&e.jsxs("div",{className:"gallery-instagram-links",children:[e.jsx("h3",{children:"Follow the Artists"}),e.jsx("div",{className:"instagram-links-list",children:t.instagramLinks.map((n,u)=>e.jsxs("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"instagram-link",children:[e.jsx("span",{className:"instagram-icon",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),n.name]},u))})]}),e.jsxs("div",{className:"gallery-thumbnails-section",children:[e.jsxs("h2",{className:"thumbnails-heading",children:[t.images.length," ",t.images.length===1?"Work":"Works"]}),e.jsx("div",{className:"gallery-thumbnails-grid",children:t.images.map((n,u)=>e.jsx("div",{className:"gallery-thumbnail-item",onClick:()=>g(n,u),children:e.jsxs("div",{className:"thumbnail-image-wrapper",children:[e.jsx("img",{src:n.src,alt:n.alt||`Image ${u+1}`,onError:f=>{f.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="300"%3E%3Crect width="400" height="300" fill="%23f0f0f0"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%23999"%3EImage%3C/text%3E%3C/svg%3E'}}),e.jsx("div",{className:"thumbnail-overlay",children:e.jsxs("svg",{className:"eye-icon",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})},n.id||u))})]})]})}),c&&o&&e.jsx(Y,{gallery:o,onClose:l})]}):e.jsx("div",{className:"page-container",children:e.jsxs("div",{className:"page-content",children:[e.jsx("p",{children:"Gallery not found"}),e.jsx("button",{onClick:()=>a("/"),children:"Return to Home"})]})})}export{V as default};
